<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K Edu - Learn Through Videos</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #fff;
        }

        /* Loading Animation Styles */
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #2a5298;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(248, 249, 250, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            z-index: 10;
        }

        .skeleton-loader {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }

        .skeleton-video {
            height: 80px;
            margin-bottom: 1rem;
            border-radius: 8px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: white;
            padding: 1rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
        }

        .logo {
            font-size: 2rem;
            font-weight: bold;
            color: white;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-links a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .nav-links a:hover {
            color: #ff4757;
        }

        .auth-section {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .user-info {
            color: white;
            font-size: 0.9rem;
        }

        .btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .btn-primary {
            background-color: #ff4757;
            color: white;
        }

        .btn-secondary {
            background-color: transparent;
            color: white;
            border: 2px solid white;
        }

        .btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        /* Search Section */
        .search-section {
            background-color: #f8f9fa;
            padding: 2rem 0;
            border-bottom: 1px solid #e9ecef;
        }

        .search-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            text-align: center;
        }

        .search-box {
            display: flex;
            max-width: 600px;
            margin: 0 auto;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 25px;
            overflow: hidden;
        }

        .search-input {
            flex: 1;
            padding: 1rem 1.5rem;
            border: none;
            font-size: 1rem;
            outline: none;
        }

        .search-btn {
            background-color: #2a5298;
            color: white;
            border: none;
            padding: 1rem 1.5rem;
            cursor: pointer;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Main Content */
        .main-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        /* Home Page */
        .hero {
            text-align: center;
            padding: 3rem 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            margin-bottom: 3rem;
        }

        .hero h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .hero p {
            font-size: 1.2rem;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Categories Grid */
        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
            position: relative;
        }

        .category-card {
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            overflow: hidden;
            transition: transform 0.3s ease;
            position: relative;
        }

        .category-card:hover {
            transform: translateY(-5px);
        }

        .category-header {
            background: linear-gradient(135deg, #ff4757, #ff3742);
            color: white;
            padding: 1.5rem;
            text-align: center;
        }

        .category-header h3 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .videos-container {
            padding: 1.5rem;
            position: relative;
        }

        .video-item {
            margin-bottom: 1rem;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .video-item:hover {
            background-color: #e9ecef;
            transform: translateX(5px);
        }

        .video-content {
            flex: 1;
        }

        .video-item h4 {
            color: #2a5298;
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }

        .video-description {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 0.5rem;
        }

        .video-meta {
            display: flex;
            gap: 1rem;
            font-size: 0.8rem;
            color: #888;
        }

        .privacy-badge {
            padding: 0.25rem 0.5rem;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .privacy-public {
            background-color: #d4edda;
            color: #155724;
        }

        .privacy-private {
            background-color: #f8d7da;
            color: #721c24;
        }

        .video-actions {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .btn-small {
            padding: 0.25rem 0.5rem;
            font-size: 0.75rem;
            border-radius: 4px;
        }

        /* Enhanced Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.9);
            animation: fadeIn 0.3s ease;
        }

        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background-color: white;
            margin: 2% auto;
            padding: 0;
            border-radius: 15px;
            width: 90%;
            max-width: 900px;
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            overflow: hidden;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-header {
            background: linear-gradient(135deg, #2a5298, #1e3c72);
            color: white;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin: 0;
        }

        .close {
            color: white;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s ease;
            background: none;
            border: none;
        }

        .close:hover {
            color: #ff4757;
            transform: scale(1.1);
        }

        .modal-body {
            padding: 0;
        }

        .video-player-container {
            position: relative;
            background: #000;
            min-height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .video-iframe {
            width: 100%;
            height: 500px;
            border: none;
        }

        .video-info {
            padding: 2rem;
        }

        .video-description-full {
            color: #666;
            line-height: 1.6;
            margin-top: 1rem;
        }

        /* Admin Panel */
        .admin-panel {
            background: #f8f9fa;
            padding: 2rem;
            border-radius: 10px;
            margin-bottom: 2rem;
            border-left: 4px solid #ff4757;
        }

        .admin-form {
            display: grid;
            gap: 1rem;
            max-width: 500px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #2a5298;
            box-shadow: 0 0 5px rgba(42, 82, 152, 0.3);
        }

        .privacy-toggle {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-top: 0.5rem;
        }

        .toggle-switch {
            position: relative;
            width: 50px;
            height: 24px;
            background-color: #ccc;
            border-radius: 24px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .toggle-switch.active {
            background-color: #4CAF50;
        }

        .toggle-slider {
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background-color: white;
            border-radius: 50%;
            transition: transform 0.3s ease;
        }

        .toggle-switch.active .toggle-slider {
            transform: translateX(26px);
        }

        /* About Section */
        .about-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .about-content h2 {
            color: #2a5298;
            margin-bottom: 1rem;
            border-bottom: 2px solid #ff4757;
            padding-bottom: 0.5rem;
        }

        .about-content p {
            margin-bottom: 1.5rem;
            font-size: 1.1rem;
        }

        /* Staff Section */
        .staff-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }

        .staff-card {
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            padding: 2rem;
            text-align: center;
        }

        .staff-avatar {
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, #2a5298, #ff4757);
            border-radius: 50%;
            margin: 0 auto 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
            font-weight: bold;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .nav-container {
                flex-direction: column;
                gap: 1rem;
                padding: 1rem;
            }

            .nav-links {
                gap: 1rem;
            }

            .hero h1 {
                font-size: 2rem;
            }

            .categories-grid {
                grid-template-columns: 1fr;
            }

            .modal-content {
                width: 95%;
                margin: 5% auto;
            }

            .video-iframe {
                height: 300px;
            }

            .video-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }

            .video-actions {
                flex-direction: row;
                width: 100%;
            }
        }

        .hidden {
            display: none !important;
        }

        /* Notification styles */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 1rem 1.5rem;
            border-radius: 5px;
            color: white;
            font-weight: 500;
            z-index: 1001;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            background-color: #28a745;
        }

        .notification.error {
            background-color: #dc3545;
        }

        .notification.info {
            background-color: #17a2b8;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="nav-container">
            <div class="logo">K Edu</div>
            <nav>
                <ul class="nav-links">
                    <li><a href="#" onclick="showPage('home')">Home</a></li>
                    <li><a href="#" onclick="showPage('about')">About</a></li>
                    <li><a href="#" onclick="showPage('contact')">Contact</a></li>
                    <li><a href="#" onclick="showPage('staff')">Staff</a></li>
                </ul>
            </nav>
            <div class="auth-section">
                <div id="userInfo" class="user-info hidden"></div>
                <button class="btn btn-secondary" id="loginBtn" onclick="showLogin()">Login</button>
                <button class="btn btn-primary hidden" id="logoutBtn" onclick="logout()">Logout</button>
            </div>
        </div>
    </header>

    <!-- Search Section -->
    <section class="search-section">
        <div class="search-container">
            <div class="search-box">
                <input type="text" class="search-input" id="searchInput" placeholder="Search for videos...">
                <button class="search-btn" id="searchBtn" onclick="searchVideos()">
                    <span id="searchText">Search</span>
                    <div class="loading-spinner hidden" id="searchSpinner"></div>
                </button>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Home Page -->
        <div id="home" class="page active">
            <div class="hero">
                <h1>Welcome to K Edu</h1>
                <p>Discover knowledge through carefully curated YouTube videos. Learn at your own pace with our organized educational content.</p>
            </div>

            <div id="categoriesContainer" class="categories-grid">
                <!-- Loading skeleton will appear here initially -->
                <div id="categoriesLoading" class="loading-overlay">
                    <div class="loading-spinner"></div>
                    <p style="margin-top: 1rem; color: #666;">Loading categories...</p>
                </div>
            </div>

            <!-- Admin Panel (only visible when logged in) -->
            <div id="adminPanel" class="admin-panel hidden">
                <h2>üë®‚Äçüíº Admin Panel</h2>
                <div class="admin-form">
                    <h3>Add New Category</h3>
                    <div class="form-group">
                        <label for="categoryName">Category Name:</label>
                        <input type="text" id="categoryName" placeholder="e.g., Mathematics">
                    </div>
                    <div class="form-group">
                        <label for="categoryDesc">Category Description:</label>
                        <textarea id="categoryDesc" placeholder="Brief description of the category"></textarea>
                    </div>
                    <button class="btn btn-primary" onclick="addCategory()">
                        <span id="addCategoryText">Add Category</span>
                        <div class="loading-spinner hidden" id="addCategorySpinner"></div>
                    </button>
                </div>

                <div class="admin-form" style="margin-top: 2rem;">
                    <h3>Add New Video</h3>
                    <div class="form-group">
                        <label for="videoCategory">Select Category:</label>
                        <select id="videoCategory">
                            <option value="">Choose a category...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="videoTitle">Video Title:</label>
                        <input type="text" id="videoTitle" placeholder="Enter video title">
                    </div>
                    <div class="form-group">
                        <label for="videoUrl">YouTube URL:</label>
                        <input type="url" id="videoUrl" placeholder="https://www.youtube.com/watch?v=...">
                    </div>
                    <div class="form-group">
                        <label for="videoDesc">Video Description:</label>
                        <textarea id="videoDesc" placeholder="Brief description of the video"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Video Privacy:</label>
                        <div class="privacy-toggle">
                            <span>Private</span>
                            <div class="toggle-switch" id="privacyToggle" onclick="togglePrivacy()">
                                <div class="toggle-slider"></div>
                            </div>
                            <span>Public</span>
                        </div>
                        <small style="color: #666; margin-top: 0.5rem;">Private videos are only visible to you</small>
                    </div>
                    <button class="btn btn-primary" onclick="addVideo()">
                        <span id="addVideoText">Add Video</span>
                        <div class="loading-spinner hidden" id="addVideoSpinner"></div>
                    </button>
                </div>
            </div>
        </div>

        <!-- About Page -->
        <div id="about" class="page">
            <div class="about-content">
                <h2>About K Edu</h2>
                <p><strong>What K Edu Does:</strong> K Edu is a comprehensive educational platform that provides access to carefully curated YouTube videos across various subjects. We organize educational content into logical categories, making it easy for students to find and learn from high-quality video resources.</p>

                <h2>Why We Created K Edu</h2>
                <p>In today's digital age, YouTube has become one of the largest repositories of educational content. However, finding quality educational videos can be overwhelming due to the vast amount of content available. K Edu was created to solve this problem by providing a curated, organized platform where students can access the best educational videos without the distraction of irrelevant content.</p>

                <h2>How K Edu Helps Students</h2>
                <p><strong>Organized Learning:</strong> Our platform categorizes videos by subject, making it easy to find relevant content for your studies.</p>
                <p><strong>Quality Assurance:</strong> All videos are reviewed by our educational staff to ensure they meet high standards for accuracy and teaching quality.</p>
                <p><strong>Easy Search:</strong> Our powerful search functionality helps you quickly find videos on specific topics.</p>
                <p><strong>Free Access:</strong> All content is freely available to students, removing barriers to quality education.</p>
                <p><strong>Mobile Friendly:</strong> Access your learning materials anywhere, anytime, on any device.</p>
            </div>
        </div>

        <!-- Contact Page -->
        <div id="contact" class="page">
            <div class="about-content">
                <h2>Contact Us</h2>
                <p>We'd love to hear from you! Whether you have questions, suggestions, or need support, don't hesitate to reach out.</p>
                
                <div style="margin-top: 2rem;">
                    <h3>Get in Touch</h3>
                    <p><strong>Email:</strong> dmkaawya@gmail.com</p>
                    <p><strong>Phone:</strong> +94 077 50 48 455</p>
                    <p><strong>Address:</strong> Kalutara south, Kalutara, Western Province, Sri Lanka</p>
                </div>

                <div style="margin-top: 2rem;">
                    <h3>Support Hours</h3>
                    <p>Monday - Friday: 9:00 AM - 6:00 PM</p>
                    <p>Saturday: 10:00 AM - 4:00 PM</p>
                    <p>Sunday: Closed</p>
                </div>

                <div style="margin-top: 2rem;">
                    <h3>For Educators</h3>
                    <p>Interested in contributing to our platform? Contact us at <strong>dmkaawya@gmail.com</strong> to learn about becoming a content curator.</p>
                </div>
            </div>
        </div>

        <!-- Staff Page -->
        <div id="staff" class="page">
            <div class="about-content">
                <h2>Our Team</h2>
                <p>Meet the dedicated educators and administrators who make K Edu possible.</p>
                
                <div class="staff-grid" style="margin-top: 2rem;">
                    <div class="staff-card">
                        <div class="staff-avatar">JD</div>
                        <h3>Dr. Jane Doe</h3>
                        <p><strong>Chief Education Officer</strong></p>
                        <p>Ph.D. in Education Technology with 15 years of experience in curriculum development.</p>
                    </div>
                    
                    <div class="staff-card">
                        <div class="staff-avatar">MS</div>
                        <h3>Prof. Mike Smith</h3>
                        <p><strong>Content Director</strong></p>
                        <p>Mathematics educator and content specialist with expertise in online learning platforms.</p>
                    </div>
                    
                    <div class="staff-card">
                        <div class="staff-avatar">SJ</div>
                        <h3>Sarah Johnson</h3>
                        <p><strong>Platform Administrator</strong></p>
                        <p>Technology specialist ensuring smooth operation of our educational platform.</p>
                    </div>
                    
                    <div class="staff-card">
                        <div class="staff-avatar">AB</div>
                        <h3>Dr. Alex Brown</h3>
                        <p><strong>Science Curriculum Lead</strong></p>
                        <p>Research scientist and educator specializing in making complex concepts accessible.</p>
                    </div>
                </div>

                <div style="margin-top: 3rem; padding: 2rem; background: #f8f9fa; border-radius: 10px;">
                    <h3>Staff Login</h3>
                    <p>Staff members can log in to access administrative features including adding new categories and video content.</p>
                    <button class="btn btn-primary" onclick="showLogin()">Staff Login</button>
                </div>
            </div>
        </div>
    </main>

    <!-- Enhanced Video Modal -->
    <div id="videoModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modalVideoTitle">Loading...</h2>
                <button class="close" onclick="closeVideoModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="video-player-container" id="videoPlayerContainer">
                    <div class="loading-overlay" id="videoLoadingOverlay">
                        <div class="loading-spinner"></div>
                        <p style="margin-top: 1rem; color: white;">Loading video...</p>
                    </div>
                </div>
                <div class="video-info" id="modalVideoInfo">
                    <p class="video-description-full" id="modalVideoDescription"></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Staff Login</h2>
                <span class="close" onclick="closeModal('loginModal')">&times;</span>
            </div>
            <div style="padding: 2rem;">
                <div class="admin-form">
                    <div class="form-group">
                        <label for="username">Username:</label>
                        <input type="text" id="username" placeholder="Enter username">
                    </div>
                    <div class="form-group">
                        <label for="password">Password:</label>
                        <input type="password" id="password" placeholder="Enter password">
                    </div>
                    <button class="btn btn-primary" onclick="login()">
                        <span id="loginText">Login</span>
                        <div class="loading-spinner hidden" id="loginSpinner"></div>
                    </button>
                </div>
                <p style="margin-top: 1rem; color: #666; font-size: 0.9rem;">Demo credentials: user / admin123</p>
            </div>
        </div>
    </div>

    <script>
        // Enhanced data structure with privacy support
        let categories = [
            {
                id: 1,
                name: "Mathematics",
                description: "From basic arithmetic to advanced calculus",
                videos: [
                    {
                        id: 1,
                        title: "Introduction to Algebra",
                        url: "https://www.youtube-nocookie.com/embed/NybHckSEQBI",
                        description: "Learn the fundamentals of algebra with clear explanations and examples.",
                        isPrivate: false,
                        uploadedBy: null,
                        uploadDate: new Date('2024-01-15')
                    },
                    {
                        id: 2,
                        title: "Calculus Basics",
                        url: "https://www.youtube-nocookie.com/embed/WUvTyaaNkzM",
                        description: "Understanding derivatives and integrals made simple.",
                        isPrivate: false,
                        uploadedBy: null,
                        uploadDate: new Date('2024-01-20')
                    }
                ]
            },
            {
                id: 2,
                name: "Science",
                description: "Physics, Chemistry, and Biology explained simply",
                videos: [
                    {
                        id: 3,
                        title: "Newton's Laws of Motion",
                        url: "https://www.youtube-nocookie.com/embed/kKKM8Y-u7ds",
                        description: "Explore the three fundamental laws that govern motion.",
                        isPrivate: false,
                        uploadedBy: null,
                        uploadDate: new Date('2024-01-
